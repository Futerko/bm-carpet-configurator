<mz-sidenav [id]="'sidenav-text'" [collapseButtonId]="'editor-carpet'">
    <mz-sidenav-header>
        <img src="assets/images/logoTH.png" width="300" />
        <br/>Crea il tuo tappeto
    </mz-sidenav-header>

    <li style="margin:10px; text-align:center;">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <a class="btn bm-green btn-large" id="editor-text" (click)="onSave()">
                    <i mz-icon-mdi [icon]="'cart'" [size]="'36px'" [align]="'left'"></i>Acquista
                </a>                
            </div>
        </div>
    </li>

    <mz-sidenav-collapsible>
        <mz-sidenav-collapsible-header>
            <i mz-icon-mdi [icon]="'camera-metering-matrix'"></i>Motivo Tappeto
        </mz-sidenav-collapsible-header>
        <mz-sidenav-collapsible-content>
            <li style="margin:10px;" class="carpet-showroom">
                <div class="row">
                    <div class="{{carpetService.mySelection.carpet.name==_carpet.name ? 'vox-selected' : ''}} col-xs-12 col-sm-12 col-md-12 col-lg-12"   *ngFor="let _carpet of carpetService.carpets" (click)="onSelectImageCarpet(_carpet)">
                        <img src="assets/images/{{_carpet.file}}" width="150"/>
                    </div>
                </div>
            </li>
        </mz-sidenav-collapsible-content>
    </mz-sidenav-collapsible>

    <mz-sidenav-collapsible>
        <mz-sidenav-collapsible-header>
            <i mz-icon-mdi [icon]="'tab-unselected'"></i>Dimensioni Tappeto
        </mz-sidenav-collapsible-header>
        <mz-sidenav-collapsible-content>
            <li style="margin:10px;">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 font-chooser-item {{carpetService.mySelection.size === obj ? 'vox-selected' : ''}}" *ngFor="let obj of carpetService.sizes" (click)="onSelectSize(obj)">
                        {{obj}}
                    </div>
                </div>
            </li>
        </mz-sidenav-collapsible-content>
    </mz-sidenav-collapsible>

    <mz-sidenav-collapsible>
        <mz-sidenav-collapsible-header>
            <i mz-icon-mdi [icon]="'palette'"></i>Colore
        </mz-sidenav-collapsible-header>
        <mz-sidenav-collapsible-content>
            <li style="margin:10px;">
                <div class="row">
                    <div *ngFor="let obj of carpetService.mySelection.carpet.palettes" class="{{obj === carpetService.mySelection.color ? 'vox-selected' : ''}} col-xs-3 col-sm-3 col-md-3 col-lg-3" (click)="onSelectColor(obj)">
                        <i mz-icon-mdi [align]="'center'" [icon]="(obj === carpetService.mySelection.color) ? 'checkbox-marked-circle' : 'brightness-1'" [size]="'48px'" [ngStyle]="{'color' : ''+ obj}"></i>
                    </div>
                </div>
            </li>
        </mz-sidenav-collapsible-content>
    </mz-sidenav-collapsible>

    <mz-sidenav-collapsible>
        <mz-sidenav-collapsible-header>
            <i mz-icon-mdi [icon]="'format-font'"></i>Carattere
        </mz-sidenav-collapsible-header>
        <mz-sidenav-collapsible-content>
            <li style="margin:10px;">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 font-chooser-item {{obj.cssClass}} {{carpetService.mySelection.font.cssClass === obj.cssClass ? 'vox-selected' : ''}}" *ngFor="let obj of carpetService.fonts" (click)="onSelectFont(obj)">
                        {{obj.name}}                
                    </div>
                </div>
            </li>
        </mz-sidenav-collapsible-content>
    </mz-sidenav-collapsible>
</mz-sidenav>

<main>
    <div class="parent">
        <img class="child" src="https://www.babymonkey.it/img/babymonkey-logo-1483604077.jpg" alt="BabyMonkey - TREE HOUSE Configurator">
    </div>

    <div class="canvasContainer">
        <div class="innerCanvasContainer">
            <canvas id="theCanvas" class="theCanvas" width="{{workarea.width}}" height="{{workarea.height}}" style="z-index: 1;"></canvas>
        </div>
    </div>

    <section class="buttonbar">
        <div class="fixed-action-btn">
            <a class="btn-floating btn-large bm-brown" id="editor-carpet">
                <i mz-icon-mdi [icon]="'pencil'" [size]="'36px'"></i>
            </a>
            <!--ul>
                <li>
                    <a class="btn-floating bm-green btn-large" id="editor-carpet">
                        <i mz-icon-mdi [icon]="'camera-metering-matrix'" [rotate]="'45'" [size]="'36px'"></i>
                    </a>
                </li>
                <li *ngIf="carpetService.mySelection.color">
                    <a class="btn-floating bm-green btn-large" id="editor-text" (click)="onSave()">
                        <i mz-icon-mdi [icon]="'floppy'" [size]="'36px'"></i>
                    </a>
                </li>
            </ul-->
        </div>
    </section>

    <img src="{{imageSaved}}" />

</main>

<!--script>
        $(document).ready(function () {
          //Get the canvas &
          var c = $('#theCanvas');
          var ct = c.get(0).getContext('2d');
          var container = $(c).parent();
    
          //Run function when browser resizes
          $(window).resize(respondCanvas);
    
          function respondCanvas() {
            c.attr('width', $(container).width()); //max width
            c.attr('height', $(container).height()); //max height
    
            //Call a function to redraw other content (texts, images etc)
          }
    
          //Initial call
          respondCanvas();
    
        }); 
      </script-->